## ITER 1 MDM ##
#mdm_model_path: "../tests/train_mdm/parkour_dataset_v_07_test03/checkpoints/model_75000.pkl"
## ITER 2 MDM
mdm_model_path: "../tests/parc/april272025/generator/iter_1checkpoints/model_25000.pkl"
output_dir: "../tests/parc/april272025/kin_gen/iter_1/"
motion_id_offset: 458
num_new_motions: 2000
new_terrain_dim_x: 16
new_terrain_dim_y: 16
dx: 0.4
dy: 0.4

procgen_mode: "FILE" # [BOXES, PATHS, STAIRS, FILE]
input_terrain_path: "../Data/parkour_dataset/for_paper/teaser_terrain.pkl"
#input_terrain_path: "../Data/parkour_dataset/gen_test_terrains/terrains.yaml"
use_opt: True
remove_hesitation: True
simplify_terrain: True
save_name: "BOXES"
only_gen: False
opt:
  device: "cuda:0"
  output_dir: "../tests/parc/april272025/kin_gen/iter_1_opt/"
  char_model: "data/assets/humanoid.xml"
  use_wandb: True
  num_iters: 3000
  step_size: 0.001
  w_root_pos: 1.0
  w_root_rot: 10.0
  w_joint_rot: 1.0
  w_smoothness: 10.0
  w_penetration: 1000.0
  w_contact: 1000.0
  w_sliding: 10.0
  w_body_constraints: 1000.0
  w_jerk: 1000.0
  max_jerk: 1000.0
  auto_compute_body_constraints: True
  char_point_samples:
    sphere_num_subdivisions: 0
    box_num_slices: 2
    box_dim_x: 3
    box_dim_y: 6
    capsule_num_circle_points: 4
    capsule_num_sphere_subdivisions: 0
    capsule_num_cylinder_slices: 4

astar:
  max_z_diff: 2.1
  max_jump_xy_dist: 3.0
  max_jump_z_diff: 0.5
  min_jump_z_diff: -1.0
  w_z: 0.15
  w_xy: 1.0
  w_bumpy: 0.0
  max_bumpy: 0.2
  uniform_cost_max: 0.5
  uniform_cost_min: 0.0
  min_start_end_xy_dist: 5.0
  max_cost: 1000.0

mdm_path:
  next_node_lookahead: 7
  rewind_num_frames: 5
  end_of_path_buffer: 2
  max_motion_length: 10.0
  #path_batch_size: 16 # not used in this script
  mdm_batch_size: 128
  top_k: 2
  w_target: 2.0
  w_contact: 0.1
  w_pen: 0.1
max_contact_loss: 3.0
max_pen_loss: 8.0
max_total_loss: 30.0

mdm_gen:
  use_prev_state: True
  use_cfg: True
  cfg_scale: 0.65
  guide_speed: False
  guide_acc: False
  guide_jerk: False
  w_speed: 0.1
  w_acc: 0.1
  w_jerk: 0.1
  max_jerk: 1000.0
  strong_hf_guidance: False
  target_guidance: False
  hf_collision_guidance: False
  prev_state_ind_key: True
  target_condition_key: True
  feature_vector_key: True
  use_ddim: True
  ddim_stride: 5
  guidance_str: 0.1

boxes:
  num_boxes: 10
  min_box_h: -2.0
  max_box_h: 2.0
  box_max_len: 10
  box_min_len: 5
  max_box_angle: 0.0
  min_box_angle: 0.0

paths:
  num_terrain_paths: 8
  maxpool_size: 1
  path_min_height: -1.6
  path_max_height: 2.0
  floor_height: -2.0

stairs:
  min_stair_start_height: -3.0
  max_stair_start_height: 1.0
  min_step_height: 0.15
  max_step_height: 0.25
  num_stairs: 4
  min_stair_thickness: 2.0
  max_stair_thickness: 8.0